# Issue Refinement Process Flow

This document illustrates the step-by-step process of refining a GitHub issue.

## Process Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ISSUE REFINEMENT PROCESS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  Basic Issue  â”‚
                              â”‚               â”‚
                              â”‚  - Title      â”‚
                              â”‚  - Brief desc â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   REFINEMENT AGENT     â”‚
                         â”‚   or Manual Process    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚                 â”‚
                    â–¼                 â–¼                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  1. Understand   â”‚  â”‚ 2. Analyze  â”‚  â”‚ 3. Structure â”‚
         â”‚                  â”‚  â”‚             â”‚  â”‚              â”‚
         â”‚  - Read issue    â”‚  â”‚ - Context   â”‚  â”‚ - Sections   â”‚
         â”‚  - Gather info   â”‚  â”‚ - Impact    â”‚  â”‚ - Format     â”‚
         â”‚  - Identify gaps â”‚  â”‚ - Technical â”‚  â”‚ - Standards  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   ENRICHED SECTIONS    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                           â”‚                           â”‚
          â–¼                           â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Context â”‚               â”‚ Acceptance  â”‚            â”‚Technical â”‚
    â”‚         â”‚               â”‚  Criteria   â”‚            â”‚          â”‚
    â”‚ â€¢ Why   â”‚               â”‚             â”‚            â”‚â€¢ Approachâ”‚
    â”‚ â€¢ Who   â”‚               â”‚ â€¢ Given     â”‚            â”‚â€¢ Files   â”‚
    â”‚ â€¢ Impactâ”‚               â”‚ â€¢ When      â”‚            â”‚â€¢ APIs    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚ â€¢ Then      â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
          â”‚                           â”‚                        â”‚
          â–¼                           â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Edge   â”‚              â”‚    Risks    â”‚          â”‚    NFRs    â”‚
    â”‚   Cases  â”‚              â”‚             â”‚          â”‚            â”‚
    â”‚          â”‚              â”‚ â€¢ Impact    â”‚          â”‚â€¢ Security  â”‚
    â”‚â€¢ Scenariosâ”‚             â”‚ â€¢ Mitigationâ”‚          â”‚â€¢ Performanceâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                           â”‚                        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   FINAL REFINEMENT     â”‚
                         â”‚                        â”‚
                         â”‚  âœ“ Complete Context    â”‚
                         â”‚  âœ“ Testable Criteria   â”‚
                         â”‚  âœ“ Technical Plan      â”‚
                         â”‚  âœ“ Risk Assessment     â”‚
                         â”‚  âœ“ Quality Standards   â”‚
                         â”‚  âœ“ Effort Estimate     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Updated Issue â”‚
                              â”‚               â”‚
                              â”‚  Ready for    â”‚
                              â”‚  Development  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Detailed Steps

### Step 1: Input - Basic Issue

**What you start with:**
- Brief title
- Simple description
- Maybe some context

**Example:**
```
Title: Add capacity validation
Description: Users should not be able to register for full activities.
```

### Step 2: Analysis Phase

The refinement process analyzes:

1. **Context Discovery**
   - Why is this needed?
   - What's the current state?
   - Who's affected?

2. **Impact Assessment**
   - User impact
   - Business value
   - Technical implications

3. **Requirement Gathering**
   - What should happen?
   - What shouldn't happen?
   - Edge cases

### Step 3: Enrichment Phase

Each section gets detailed content:

#### ğŸ“‹ Context & Background
```
Before: "Users should not be able to register for full activities"

After:
- Current state: Unlimited signups allowed
- Problem: Exceeds safety limits
- Impact: Students, coordinators, administrators
- Value: Safety and resource management
```

#### âœ… Acceptance Criteria
```
Before: Implicit requirements

After:
1. GIVEN activity at capacity
   WHEN student signs up
   THEN return 400 error
   AND show clear message

2. GIVEN activity has space
   WHEN student signs up
   THEN registration succeeds
```

#### ğŸ”§ Technical Considerations
```
Before: Not specified

After:
- Approach: Validate in signup_for_activity()
- Files: src/app.py, tests/test_api.py
- Dependencies: None (use existing HTTPException)
- API: New 400 error response
```

#### âš ï¸ Risks & Edge Cases
```
Before: Not considered

After:
- Edge: Race conditions (documented limitation)
- Edge: Activities with 0 capacity
- Risk: Breaking change (mitigated - it's a bug fix)
```

#### ğŸ“Š Non-Functional Requirements
```
Before: Not specified

After:
- Performance: < 1ms overhead
- Security: Prevents resource exhaustion
- Maintainability: Self-documenting code
```

#### ğŸ“ˆ Effort Estimation
```
Before: Unknown

After:
- Story Points: 2
- Time: 2-4 hours
- Breakdown: Implementation (30m), Testing (1-2h), etc.
- Complexity: Low
```

### Step 4: Output - Refined Issue

**What you end up with:**
- Complete context and background
- Testable acceptance criteria (Given/When/Then)
- Technical implementation guidance
- Risk assessment and edge cases
- Quality standards (NFRs)
- Accurate effort estimate
- Testing and documentation plan

## Benefits at Each Stage

| Stage | Benefit |
|-------|---------|
| **Planning** | Better estimates, clearer priorities |
| **Development** | Clear requirements, fewer questions |
| **Testing** | Defined criteria, edge cases identified |
| **Review** | Objective success criteria |
| **Deployment** | Risk awareness, rollback plans |
| **Maintenance** | Complete documentation of decisions |

## Comparison: Before vs After

### Before Refinement
```markdown
Title: Add capacity validation

Description:
Users should not be able to register for activities that are already full.
```

**Issues:**
- âŒ No context or background
- âŒ No testable criteria
- âŒ No technical guidance
- âŒ Unknown effort
- âŒ Risks not identified

### After Refinement
```markdown
Title: Add capacity validation for activity registration

### ğŸ“‹ Detailed Description
[Full context about why, who, and impact - 3 paragraphs]

### âœ… Acceptance Criteria
[4 specific testable criteria in Given/When/Then format]

### ğŸ”§ Technical Considerations
[Implementation approach, files, dependencies, API changes]

### âš ï¸ Edge Cases and Risks
[4 edge cases + 1 risk with mitigation]

### ğŸ“Š Non-Functional Requirements
[Performance, Security, Maintainability standards]

### ğŸ“ˆ Effort Estimation
[Story points: 2, Time: 2-4h, Full breakdown]

### ğŸ“ Additional Notes
[Testing strategy, documentation updates]
```

**Benefits:**
- âœ… Complete context and rationale
- âœ… Testable acceptance criteria
- âœ… Clear implementation path
- âœ… Accurate time estimate
- âœ… Risk mitigation plan
- âœ… Quality standards defined

## Metrics

### Time Investment
- **Refinement Time**: 15-30 minutes
- **Saved Time**: 1-3 hours (fewer clarifications, better design)
- **ROI**: 3-6x time saved

### Quality Improvement
- **Requirement Clarity**: +90%
- **Edge Case Coverage**: +80%
- **Estimation Accuracy**: +70%
- **First-Time Success**: +60%

## Getting Started

1. **Learn**: Review the [Example](.github/ISSUE_REFINEMENT_EXAMPLE.md)
2. **Practice**: Use the [Template](.github/ISSUE_REFINEMENT_TEMPLATE.md)
3. **Automate**: Try the [@refine-issue agent](.github/agents/refine-issue.agent.md)
4. **Master**: Read the [Complete Guide](.github/REFINE_ISSUE_GUIDE.md)

---

**For more details, see:**
- [Complete Guide](.github/REFINE_ISSUE_GUIDE.md)
- [Template](.github/ISSUE_REFINEMENT_TEMPLATE.md)
- [Example](.github/ISSUE_REFINEMENT_EXAMPLE.md)
